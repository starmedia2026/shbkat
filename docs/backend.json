{
  "entities": {
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer with their account and balance information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the customer, matches Firebase Auth UID."
        },
        "name": {
          "type": "string",
          "description": "The customer's full name."
        },
        "accountNumber": {
          "type": "string",
          "description": "The customer's account number."
        },
        "phoneNumber": {
          "type": "string",
          "description": "The customer's phone number."
        },
        "location": {
          "type": "string",
          "description": "The customer's location."
        },
        "balance": {
          "type": "number",
          "description": "The customer's account balance.",
          "format": "number"
        }
      },
      "required": [
        "id",
        "name",
        "accountNumber",
        "phoneNumber",
        "location",
        "balance"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/customers/{customerId}",
        "definition": {
          "entityName": "Customer",
          "schema": {
            "$ref": "#/backend/entities/Customer"
          },
          "description": "Stores customer data including account number, phone number, and balance.",
          "params": [
            {
              "name": "customerId",
              "description": "The unique identifier for the customer."
            }
          ]
        }
      }
    ],
    "reasoning": "The database structure is designed to store customer information, including their account details, contact number, and balance, and to allow the application to update their balance. To ensure security and proper data segregation, each customer's data is stored under a collection named 'customers'. This structure offers a clear separation of customer records, making it easy to manage and scale customer-related operations. Furthermore, to enhance security and maintain data integrity, consider implementing Firestore security rules that restrict access to customer data based on user roles or authentication status.\n\n**Authorization Independence:**  Since all customer data is self-contained within the `customers` collection, there is no reliance on data from other collections for authorization. Security rules can be applied directly to the `customers` collection based on the user's authentication status.\n\n**QAPs Support:** The segregation strategy ensures that listing customers is secure, as the rules applied to `/customers/{customerId}` govern access to each individual customer's document. There is no mixing of different access needs within the same collection."
  }
}
